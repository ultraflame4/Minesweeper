window.addEventListener("load",(function(){document.getElementById("openGeneratePopup").addEventListener("click",(function(){document.getElementById("generateConfigContainer").style.display="flex"})),document.getElementById("closeConfigButton").addEventListener("click",(function(){document.getElementById("generateConfigContainer").style.display="none"}));var e=!1;function t(e,n){void 0===n&&(n=!1);for(var a=0,d=!1,o=parseInt(e.dataset.y),i=parseInt(e.dataset.x),r=0;r<3;r++)for(var l=r-1+o,s=0;s<3;s++){var c="fieldTileId-"+(s-1+i)+"x"+l,u=document.getElementById(c);null!=u&&(n&&(t(u),u.disabled=!0),"true"===u.dataset.isbomb&&a++)}return e.textContent=a.toString(),"true"==e.dataset.isbomb&&(e.textContent="X",d=!0),d}document.getElementById("generateField").addEventListener("click",(function(){e=!0;var n=parseInt(document.getElementById("fieldHeightInput").value),a=parseInt(document.getElementById("fieldWidthInput").value),d=n*a,o=Math.round(d/4),i=document.getElementById("minefieldContainer");i.innerHTML="";for(var r=0;r<n;r++){var l=document.createElement("div");l.className="row";for(var s=function(n){var a=document.createElement("button");a.id="fieldTileId-"+n+"x"+r,a.dataset.x=n.toString(),a.dataset.y=r.toString(),a.className="fieldTile",a.addEventListener("contextmenu",(function(e){var t;e.preventDefault(),(t=a).disabled||("true"===t.dataset.isflagged?(t.dataset.isflagged="false",t.textContent=""):(t.dataset.isflagged="true",t.textContent="F"))})),a.addEventListener("click",(function(n){var d;"true"!==(d=a).dataset.isflagged&&(t(d,e)&&!e&&setTimeout((function(){confirm("Boom! Dead.\nYou stepped on a landmine and exploded.\nDo you want to continue? \n(Click OK to resume game and CANCEL to quit)")||function(){console.log("Exposing field...");var e=document.getElementById("minefieldContainer");Array.from(e.children).forEach((function(e){Array.from(e.children).forEach((function(e){t(e),e.disabled=!0}))}))}()}),400),e=!1,d.disabled=!0)})),a.dataset.isbomb=(Math.random()<o/d).toString(),a.dataset.isflagged="false",l.append(a)},c=0;c<a;c++)s(c);i.append(l)}document.getElementById("closeConfigButton").click()}))}));