window.addEventListener("load",(function(){document.getElementById("openGeneratePopup").addEventListener("click",(function(){document.getElementById("generateConfigContainer").style.display="flex"})),document.getElementById("closeConfigButton").addEventListener("click",(function(){document.getElementById("generateConfigContainer").style.display="none"}));var e=!1;function t(e,n){void 0===n&&(n=!1);for(var o=0,d=!1,a=parseInt(e.dataset.y),i=parseInt(e.dataset.x),r=0;r<3;r++)for(var l=r-1+a,c=0;c<3;c++){var u="fieldTileId-"+(c-1+i)+"x"+l,m=document.getElementById(u);null!=m&&(n&&(t(m),m.disabled=!0),"true"===m.dataset.isbomb&&o++)}return e.textContent=o.toString(),"true"==e.dataset.isbomb&&(e.textContent="X",d=!0),d}document.getElementById("generateField").addEventListener("click",(function(){e=!0;var n=parseInt(document.getElementById("fieldHeightInput").value),o=parseInt(document.getElementById("fieldWidthInput").value),d=n*o,a=Math.round(d/4),i=document.getElementById("minefieldContainer");i.innerHTML="";for(var r=0;r<n;r++){var l=document.createElement("div");l.className="row";for(var c=function(n){var o=document.createElement("button");o.id="fieldTileId-"+n+"x"+r,o.dataset.x=n.toString(),o.dataset.y=r.toString(),o.className="fieldTile",o.addEventListener("click",(function(n){var d;t(d=o,e)&&!e&&setTimeout((function(){confirm("Boom! Dead.\nYou stepped on a landmine and exploded.\nDo you want to continue? \n(Click OK to resume game and CANCEL to quit)")||function(){console.log("Exposing field...");var e=document.getElementById("minefieldContainer");Array.from(e.children).forEach((function(e){Array.from(e.children).forEach((function(e){t(e),e.disabled=!0}))}))}()}),400),e=!1,d.disabled=!0})),o.dataset.isbomb=(Math.random()<a/d).toString(),l.append(o)},u=0;u<o;u++)c(u);i.append(l)}document.getElementById("closeConfigButton").click()}))}));