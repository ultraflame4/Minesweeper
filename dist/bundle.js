window.addEventListener("load",(function(){document.getElementById("openGeneratePopup").addEventListener("click",(function(){document.getElementById("generateConfigContainer").style.display="flex"})),document.getElementById("closeConfigButton").addEventListener("click",(function(){document.getElementById("generateConfigContainer").style.display="none"}));var e=!1;function t(e,n){void 0===n&&(n=!1);var o=0;if("true"==e.dataset.isbomb)return e.textContent="X",!0;for(var d=parseInt(e.dataset.y),a=parseInt(e.dataset.x),i=0;i<3;i++)for(var r=i-1+d,l=0;l<3;l++){var c="fieldTileId-"+(l-1+a)+"x"+r,u=document.getElementById(c);null!=u&&(n&&(t(u),u.disabled=!0),"true"===u.dataset.isbomb&&o++)}return e.textContent=o.toString(),!1}document.getElementById("generateField").addEventListener("click",(function(){e=!0;var n=parseInt(document.getElementById("fieldHeightInput").value),o=parseInt(document.getElementById("fieldWidthInput").value),d=n*o,a=Math.round(d/5),i=document.getElementById("minefieldContainer");i.innerHTML="";for(var r=0;r<n;r++){var l=document.createElement("div");l.className="row";for(var c=function(n){var o=document.createElement("button");o.id="fieldTileId-"+n+"x"+r,o.dataset.x=n.toString(),o.dataset.y=r.toString(),o.className="fieldTile",o.addEventListener("click",(function(n){var d;t(d=o,e)&&!e&&setTimeout((function(){confirm("Boom! Dead.\nYou stepped on a landmine and exploded.\nDo you want to continue? \n(Click OK to resume game and CANCEL to quit)")||function(){console.log("Exposing field...");var e=document.getElementById("minefieldContainer");Array.from(e.children).forEach((function(e){Array.from(e.children).forEach((function(e){t(e),e.disabled=!0}))}))}()}),400),e=!1,d.disabled=!0})),o.dataset.isbomb=(Math.random()<a/d).toString(),l.append(o)},u=0;u<o;u++)c(u);i.append(l)}document.getElementById("closeConfigButton").click()}))}));