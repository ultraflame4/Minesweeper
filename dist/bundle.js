window.addEventListener("load",(function(){document.getElementById("openGeneratePopup").addEventListener("click",(function(){document.getElementById("generateConfigContainer").style.display="flex"})),document.getElementById("closeConfigButton").addEventListener("click",(function(){document.getElementById("generateConfigContainer").style.display="none"}));var e=!1;function t(e,n){void 0===n&&(n=!1);for(var a=0,d=!1,o=parseInt(e.dataset.y),i=parseInt(e.dataset.x),l=!1,r=0;r<3;r++)for(var s=r-1+o,c=0;c<3;c++){var u="fieldTileId-"+(c-1+i)+"x"+s,m=document.getElementById(u);null!=m&&(n&&("true"===m.dataset.isbomb&&(m.dataset.isbomb="false",l=!0),t(m),m.disabled=!0),"true"===m.dataset.isbomb&&a++)}return e.textContent=a.toString(),"true"==e.dataset.isbomb&&(e.textContent="X",d=!0),l?t(e,n):d}document.getElementById("generateField").addEventListener("click",(function(){e=!0;var n=parseInt(document.getElementById("fieldHeightInput").value),a=parseInt(document.getElementById("fieldWidthInput").value),d=document.getElementById("minefieldContainer");d.innerHTML="";for(var o=0;o<n;o++){var i=document.createElement("div");i.className="row";for(var l=function(n){var a=document.createElement("button");a.id="fieldTileId-"+n+"x"+o,a.dataset.x=n.toString(),a.dataset.y=o.toString(),a.className="fieldTile",a.addEventListener("contextmenu",(function(e){var t;e.preventDefault(),(t=a).disabled||("true"===t.dataset.isflagged?(t.dataset.isflagged="false",t.textContent=""):(t.dataset.isflagged="true",t.textContent="F"))})),a.addEventListener("click",(function(n){var d;"true"!==(d=a).dataset.isflagged&&(t(d,e)&&!e&&setTimeout((function(){confirm("Boom! Dead.\nYou stepped on a landmine and exploded.\nDo you want to continue? \n(Click OK to resume game and CANCEL to quit)")||function(){console.log("Exposing field...");var e=document.getElementById("minefieldContainer");Array.from(e.children).forEach((function(e){Array.from(e.children).forEach((function(e){t(e),e.disabled=!0}))}))}()}),400),e=!1,d.disabled=!0)})),a.dataset.isbomb=(Math.random()<.25).toString(),a.dataset.isflagged="false",i.append(a)},r=0;r<a;r++)l(r);d.append(i)}document.getElementById("closeConfigButton").click()}))}));